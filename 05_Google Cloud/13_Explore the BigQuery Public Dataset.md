
### 개요

대규모 데이터 세트를 저장하고 쿼리할 때 올바른 하드웨어와 인프라를 사용하지 않으면 많은 시간과 비용이 들 수 있다.
BigQuery는 Google 인프라의 처리 능력을 사용하여 매우 빠른 SQL 쿼리를 지원함으로써 이러한 문제를 해결하는 기업용 데이터 웨어하우스이다.
BigQuery로 데이터를 이동하기만 하면 되며, 힘든 작업은 Google에서 처리한다.
비즈니스 요구사항을 기준으로 다른 사용자에게 데이터를 보거나 쿼리할 수 있는 능력을 부여하는 등 프로젝트와 데이터에 대한 엑세스를 제어할 수 있다.

Cloud Console, 명령줄 도구를 통해 자바, .NET, Python과 같은 다양한 클라이언트 라이브러리를 사용하여 BigQuery REST API를 호출하여 BigQuery에 액세스한다.
또한 데이터를 시각화하거나 로드하는 등 BigQuery와 상호작용하기 위해 사용할 수 있는 다양한 타사 도구도 있다.

Cloud Console에서 BigQuery 웹 UI를 쿼리 실행, 데이터 로드, 데이터 내보내기와 같은 작업을 수행하기 위한 시각적 인터페이스로 사용할 수 있다.

### 공개 데이터 세트 쿼리하기

#### example) 미국 이름 데이터 세트 로드하기

해당 작업에서는 미국 이름 공개 데이터 세트를 BigQuery에 로드한 후 데이터 세트를 쿼리하여 1910년부터 2013년에 미국에서 가장 많이 쓰인 이름을 확인한다.

1. 데이터 추가 > 프로젝트 고정 > 프로젝트 이름 입력 > bigquery-public-data 입력 및 고정 > 고정된 프로젝트 목록에서 usa_names 찾기 및 쿼리
2. 쿼리 편집기 텍스트 영역에 다음 쿼리 입력 후 실행
	```
	SELECT
	  name, gender,
	  SUM(number) AS total
	FROM
	  `bigquery-public-data.usa_names.usa_1910_2013`
	GROUP BY
	  name, gender
	ORDER BY
	  total DESC
	LIMIT
	  10
	```

#### 로컬 컴퓨터에 데이터 다운로드

1. ZIP 파일 로컬 컴퓨터에 다운로드 및 압축 풀기
2. 쿼리할 파일을 열어서 데이터 살펴보기 및 파일의 위치 기록

### 데이터 세트 만들기

테이블을 보관할 데이터 세트를 만들고 프로젝트에 데이터를 추가한 후 쿼리할 데이터 테이블 만들기
	*데이터 세트를 통해 프로젝트의 테이블 및 보기에 대한 액세스를 제어할 수 있다.

1. 탐색기 섹션에서 사용할 프로젝트 ID의 데이터 세트 만들기
	데이터 세트 ID만 입력 후 나머지는 기본값으로 지정

### 새 테이블에 데이터 로드

1. 탐색기 섹션에서 전 과정에서 만든 데이터 세트를 클릭 후 표 만들기
2. 테이블 만들기 페이지에서 다음 실행
	Create table from: 란에서 드롭 다운 메뉴의 업로드를 선택에 소스 업로드
	파일 형식의 경우 드롭다운 메뉴에서 CSV 선택
	테이블 이름 입력
	스키마 섹션에서 텍스트로 수정 전환을 클릭하고 다음 스키마 정의를 텍스트 상자에 붙여넣은 후 테이블 만들기
		- name:string, gender:string, count:integer

#### 테이블 미리보기

1. 왼쪽 패널 탐색창에서 전에 만든 로드한 데이터를 선택한 후 미리보기 탭을 클릭

### 테이블 쿼리

테이블에 데이터를 로드했으므로 테이블을 대상으로 쿼리를 실행할 수 있다.
해당 프로세스는 공개 테이블 대신 내 테이블을 쿼리한다는 점을 제외하고 위의 예시와 동일하다.

1. 쿼리 편집기에서 새 쿼리 작성 클릭
2. 쿼리 편집기에 다음 쿼리 입력 후 실행
	```
	SELECT
	 name, count
	FROM
	 `babynames.names_2014`
	WHERE
	 gender = 'M'
	ORDER BY count DESC LIMIT 5
	```